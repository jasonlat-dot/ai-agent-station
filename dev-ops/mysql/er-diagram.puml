@startuml ai-agent-station-er-diagram
!define ENTITY_COLOR #E1F5FE
!define RELATION_COLOR #FFF3E0
!define PRIMARY_KEY_COLOR #FFCDD2
!define FOREIGN_KEY_COLOR #C8E6C9

title ğŸ¤– AI Agent Station æ•°æ®åº“ ER å›¾

' å®šä¹‰å®ä½“
entity "ğŸ¤– ai_agent (AIä»£ç†)" as ai_agent {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  agent_id : varchar(64) ğŸ†” ä»£ç†å”¯ä¸€æ ‡è¯†
  agent_name : varchar(128) ğŸ“ ä»£ç†åç§°
  agent_desc : varchar(512) ğŸ“„ ä»£ç†æè¿°
  agent_logo : varchar(512) ğŸ–¼ï¸ ä»£ç†å¤´åƒ
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "âš™ï¸ ai_agent_flow_config (æµç¨‹é…ç½®)" as ai_agent_flow_config {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + agent_id : varchar(64) <<FK>> ğŸ”— ä»£ç†ID
  flow_name : varchar(128) ğŸ“ æµç¨‹åç§°
  flow_desc : varchar(512) ğŸ“„ æµç¨‹æè¿°
  flow_config : text ğŸ”§ æµç¨‹é…ç½®(JSON)
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "â° ai_agent_task_schedule (ä»»åŠ¡è°ƒåº¦)" as ai_agent_task_schedule {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + agent_id : varchar(64) <<FK>> ğŸ”— ä»£ç†ID
  task_name : varchar(128) ğŸ“ ä»»åŠ¡åç§°
  task_desc : varchar(512) ğŸ“„ ä»»åŠ¡æè¿°
  cron_expression : varchar(128) â±ï¸ Cronè¡¨è¾¾å¼
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ’» ai_client (AIå®¢æˆ·ç«¯)" as ai_client {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  client_id : varchar(64) ğŸ†” å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†
  client_name : varchar(128) ğŸ“ å®¢æˆ·ç«¯åç§°
  client_desc : varchar(512) ğŸ“„ å®¢æˆ·ç«¯æè¿°
  channel : varchar(32) ğŸ“¡ æ¸ é“ç±»å‹
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ”§ ai_client_config (å®¢æˆ·ç«¯é…ç½®)" as ai_client_config {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  config_key : varchar(128) ğŸ”‘ é…ç½®é”®
  config_value : text ğŸ’¾ é…ç½®å€¼
  config_desc : varchar(512) ğŸ“„ é…ç½®æè¿°
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸŒ ai_client_api (å®¢æˆ·ç«¯API)" as ai_client_api {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  api_name : varchar(128) ğŸ“ APIåç§°
  api_url : varchar(512) ğŸŒ APIåœ°å€
  api_method : varchar(16) ğŸ”§ è¯·æ±‚æ–¹æ³•
  api_headers : text ğŸ“‹ è¯·æ±‚å¤´(JSON)
  api_params : text ğŸ“ è¯·æ±‚å‚æ•°(JSON)
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ§  ai_client_model (å®¢æˆ·ç«¯æ¨¡å‹)" as ai_client_model {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  model_name : varchar(128) ğŸ“ æ¨¡å‹åç§°
  model_type : varchar(64) ğŸ¤– æ¨¡å‹ç±»å‹
  model_config : text âš™ï¸ æ¨¡å‹é…ç½®(JSON)
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ‘¨â€ğŸ’¼ ai_client_advisor (å®¢æˆ·ç«¯é¡¾é—®)" as ai_client_advisor {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  advisor_name : varchar(128) ğŸ“ é¡¾é—®åç§°
  advisor_type : varchar(64) ğŸ‘” é¡¾é—®ç±»å‹
  advisor_config : text ğŸ“‹ é¡¾é—®é…ç½®(JSON)
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ’¬ ai_client_system_prompt (ç³»ç»Ÿæç¤º)" as ai_client_system_prompt {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  prompt_name : varchar(128) ğŸ“ æç¤ºåç§°
  prompt_content : text ğŸ’­ æç¤ºå†…å®¹
  prompt_type : varchar(64) ğŸ·ï¸ æç¤ºç±»å‹
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ“š ai_client_rag_order (RAGè®¢å•)" as ai_client_rag_order {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  order_id : varchar(64) ğŸ†” è®¢å•ID
  order_content : text ğŸ“„ è®¢å•å†…å®¹
  order_status : varchar(32) ğŸ“Š è®¢å•çŠ¶æ€
  rag_config : text ğŸ”§ RAGé…ç½®(JSON)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

entity "ğŸ› ï¸ ai_client_tool_mcp (MCPå·¥å…·)" as ai_client_tool_mcp {
  * id : bigint(20) <<PK>> ğŸ”‘ ä¸»é”®ID
  --
  + client_id : varchar(64) <<FK>> ğŸ”— å®¢æˆ·ç«¯ID
  tool_name : varchar(128) ğŸ“ å·¥å…·åç§°
  tool_type : varchar(64) ğŸ”§ å·¥å…·ç±»å‹
  tool_config : text âš™ï¸ å·¥å…·é…ç½®(JSON)
  transport_type : varchar(32) ğŸšš ä¼ è¾“ç±»å‹
  status : tinyint(4) âš¡ çŠ¶æ€(0ç¦ç”¨/1å¯ç”¨)
  creator : varchar(64) ğŸ‘¤ åˆ›å»ºè€…
  updater : varchar(64) ğŸ”„ æ›´æ–°è€…
  create_time : datetime â° åˆ›å»ºæ—¶é—´
  update_time : datetime ğŸ”„ æ›´æ–°æ—¶é—´
  deleted : tinyint(4) ğŸ—‘ï¸ åˆ é™¤æ ‡è®°(0æ­£å¸¸/1åˆ é™¤)
}

' å®šä¹‰å…³ç³»
ai_agent ||--o{ ai_agent_flow_config : "ä¸€å¯¹å¤š"
ai_agent ||--o{ ai_agent_task_schedule : "ä¸€å¯¹å¤š"

ai_client ||--o{ ai_client_config : "ä¸€å¯¹å¤š"
ai_client ||--o{ ai_client_api : "ä¸€å¯¹å¤š"
ai_client ||--o{ ai_client_model : "ä¸€å¯¹å¤š"
ai_client ||--o{ ai_client_advisor : "ä¸€å¯¹å¤š"
ai_client ||--o{ ai_client_system_prompt : "ä¸€å¯¹å¤š"
ai_client ||--o{ ai_client_rag_order : "ä¸€å¯¹å¤š"
ai_client ||--o{ ai_client_tool_mcp : "ä¸€å¯¹å¤š"

' æ·»åŠ æ³¨é‡Š
note top of ai_agent : ğŸ¤– AIä»£ç†æ ¸å¿ƒè¡¨\nç®¡ç†æ‰€æœ‰AIä»£ç†çš„åŸºæœ¬ä¿¡æ¯
note top of ai_client : ğŸ’» AIå®¢æˆ·ç«¯æ ¸å¿ƒè¡¨\nç®¡ç†æ‰€æœ‰å®¢æˆ·ç«¯çš„åŸºæœ¬ä¿¡æ¯

note bottom : ğŸ“ **è®¾è®¡è¯´æ˜**\nâ€¢ ğŸ”‘ æ‰€æœ‰è¡¨éƒ½æœ‰ç»Ÿä¸€çš„ä¸»é”®è®¾è®¡\nâ€¢ ğŸ—‘ï¸ æ”¯æŒè½¯åˆ é™¤æœºåˆ¶(deletedå­—æ®µ)\nâ€¢ ğŸ‘¤ è®°å½•æ“ä½œäººå‘˜ä¿¡æ¯(creator/updater)\nâ€¢ â° å®Œæ•´çš„æ—¶é—´æˆ³è®°å½•\nâ€¢ ğŸ”§ ä½¿ç”¨JSONå­˜å‚¨å¤æ‚é…ç½®ä¿¡æ¯\nâ€¢ ğŸ“Š ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†(0ç¦ç”¨/1å¯ç”¨)

@enduml